##################
## Key Mappings ##
##################

set $mod Mod4
set $alt Mod1

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:monospace 8

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
#font pango:DejaVu Sans Mono 8

# Start XDG autostart .desktop files using dex. See also
# https://wiki.archlinux.org/index.php/XDG_Autostart

#############################
## Workspace Configuration ##
#############################

## Workspace - Names
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"
set $ws11 "11"
set $ws12 "12"
set $ws13 "13"
set $ws14 "14"
set $ws15 "15"
set $ws16 "16"
set $ws17 "17"
set $ws18 "18"
set $ws19 "19"

## Workspace - Navigate to workspace (01-10)
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

## Workspace - Navigate to workspace (11-19)
bindsym $mod+Ctrl+1 workspace number $ws11
bindsym $mod+Ctrl+2 workspace number $ws12
bindsym $mod+Ctrl+3 workspace number $ws13
bindsym $mod+Ctrl+4 workspace number $ws14
bindsym $mod+Ctrl+5 workspace number $ws15
bindsym $mod+Ctrl+6 workspace number $ws16
bindsym $mod+Ctrl+7 workspace number $ws17
bindsym $mod+Ctrl+8 workspace number $ws18
bindsym $mod+Ctrl+9 workspace number $ws19

## Workspace - Navigate relative workspaces
bindsym $mod+Tab workspace next
bindsym $mod+$alt+Right workspace next
bindsym $mod+Shift+Tab workspace prev
bindsym $mod+$alt+Left workspace prev

## Workspace - Navigate relavant workspace on output
bindsym $mod+Ctrl+Tab workspace next_on_output
#bindsym $mod+Ctrl+l workspace next_on_output
bindsym $mod+Ctrl+Shift+Tab workspace prev_on_output
bindsym $mod+Ctrl+h workspace prev_on_output

## Workspace - Next free workspace
bindsym $mod+grave exec --no-startup-id /usr/bin/i3-next-workspace

## Workspace - Move focused container to workspace (01-10)
bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10

## Workspace - Move focused container to workspace (11-19)
bindsym $mod+Shift+Ctrl+1 move container to workspace number $ws11
bindsym $mod+Shift+Ctrl+2 move container to workspace number $ws12
bindsym $mod+Shift+Ctrl+3 move container to workspace number $ws13
bindsym $mod+Shift+Ctrl+4 move container to workspace number $ws14
bindsym $mod+Shift+Ctrl+5 move container to workspace number $ws15
bindsym $mod+Shift+Ctrl+6 move container to workspace number $ws16
bindsym $mod+Shift+Ctrl+7 move container to workspace number $ws17
bindsym $mod+Shift+Ctrl+8 move container to workspace number $ws18
bindsym $mod+Shift+Ctrl+9 move container to workspace number $ws19

## Workspace - Move focused container, then follow to selected workspace (01-10)
bindsym $mod+$alt+1 move container to workspace number $ws1; workspace number 1
bindsym $mod+$alt+2 move container to workspace number $ws2; workspace number $ws2
bindsym $mod+$alt+3 move container to workspace number $ws3; workspace number $ws3
bindsym $mod+$alt+4 move container to workspace number $ws4; workspace number $ws4
bindsym $mod+$alt+5 move container to workspace number $ws5; workspace number $ws5
bindsym $mod+$alt+6 move container to workspace number $ws6; workspace number $ws6
bindsym $mod+$alt+7 move container to workspace number $ws7; workspace number $ws7
bindsym $mod+$alt+8 move container to workspace number $ws8; workspace number $ws8
bindsym $mod+$alt+9 move container to workspace number $ws9; workspace number $ws9
bindsym $mod+$alt+0 move container to workspace number $ws10; workspace number $ws10

## Workspace - Move focused container, then follow to selected workspace (11-19)
bindsym $mod+$alt+Ctrl+1 move container to workspace number $ws11; workspace number $ws11
bindsym $mod+$alt+Ctrl+2 move container to workspace number $ws12; workspace number $ws12
bindsym $mod+$alt+Ctrl+3 move container to workspace number $ws13; workspace number $ws13
bindsym $mod+$alt+Ctrl+4 move container to workspace number $ws14; workspace number $ws14
bindsym $mod+$alt+Ctrl+5 move container to workspace number $ws15; workspace number $ws15
bindsym $mod+$alt+Ctrl+6 move container to workspace number $ws16; workspace number $ws16
bindsym $mod+$alt+Ctrl+7 move container to workspace number $ws17; workspace number $ws17
bindsym $mod+$alt+Ctrl+8 move container to workspace number $ws18; workspace number $ws18
bindsym $mod+$alt+Ctrl+9 move container to workspace number $ws19; workspace number $ws19

## Workspace - Move focused container to a next free workspace
bindcode $mod+96 exec --no-startup-id /usr/bin/i3-next-workspace --move-window

##########################
## Window Configuration ##
##########################

## Window - Focus
bindsym $mod+a focus parent
bindsym $mod+z focus child

## Window - Navigate - Relative Window
bindsym $mod+h focus left
bindsym $mod+Left focus left
bindsym $mod+l focus right
bindsym $mod+Right focus right
bindsym $mod+k focus up
bindsym $mod+Up focus up
bindsym $mod+j focus down
bindsym $mod+Down focus down

## Window - Move - Focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+l move right
bindsym $mod+Shift+Right move right

## Window - Modify - Containing Workspace
bindsym $mod+Ctrl+Shift+Left move workspace to output left
bindsym $mod+Ctrl+Shift+h move workspace to output left
bindsym $mod+Ctrl+Shift+Right move workspace to output right
bindsym $mod+Ctrl+Shift+l move workspace to output right
bindsym $mod+Ctrl+Shift+Up move workspace to output up
bindsym $mod+Ctrl+Shift+k move workspace to output up
bindsym $mod+Ctrl+Shift+Down move workspace to output down
bindsym $mod+Ctrl+Shift+j move workspace to output down

## Window - Modify - Change focused orientation
bindsym $mod+v split vertical
bindsym $mod+g split horizontal
bindsym $mod+BackSpace split toggle

## Window - Modify - Fullscreen
bindsym $mod+f fullscreen toggle

## Window - Float - Toggle float
bindsym $mod+Shift+f floating toggle

## Window - Float - Move with mouse
floating_modifier $mod normal

## Window - Modify - Tile/Float Focus Toggle
bindsym $mod+Shift+t focus mode_toggle

## Window - Modify - Window Layout Mode
bindsym $mod+t layout toggle tabbed splith splitv

#####################
## Window Resizing ##
#####################

# resize window (you can also use the mouse for that)
mode "resize" {
        bindsym Left resize shrink width 6 px or 6 ppt
        bindsym h resize shrink width 6 px or 6 ppt
        bindsym Up resize shrink height 6 px or 6 ppt
        bindsym j resize shrink height 6 px or 6 ppt
        bindsym Down resize grow height 6 px or 6 ppt
        bindsym k resize grow height 6 px or 6 ppt
        bindsym Right resize grow width 6 px or 6 ppt
        bindsym l resize grow width 6 px or 6 ppt
        
        bindsym Shift+Left resize shrink width 12 px or 12 ppt
        bindsym Shift+h resize shrink width 12 px or 12 ppt
        bindsym Shift+Up resize shrink height 12 px or 12 ppt
        bindsym Shift+j resize shrink height 12 px or 12 ppt
        bindsym Shift+Down resize grow height 12 px or 12 ppt
        bindsym Shift+k resize grow height 12 px or 12 ppt
        bindsym Shift+Right resize grow width 12 px or 12 ppt
        bindsym Shift+l resize grow width 12 px or 12 ppt

        bindsym minus gaps inner current minus 6
        bindsym Shift+minus gaps inner current minus 12
        bindsym plus gaps inner current plus 6
        bindsym Shift+plus gaps inner current plus 12
        
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

bindsym $mod+r mode "resize"

##############################
## Scratchpad Configuration ##
##############################

bindsym $mod+Ctrl+a scratchpad show
bindsym $mod+Ctrl+m move to scratchpad

#######################
## System Management ##
#######################

## Exit app
bindsym $mod+Shift+q [con_id="__focused__"] kill

## Terminate app
bindsym $mod+$alt+q [con_id="__focused__"] exec --no-startup-id kill -9 $(xdotool getwindowfocus getwindowpid)

## Reload / Restart i3 config
bindsym $mod+Shift+c reload
bindsym $mod+Ctrl+r restart

## System - Lock / Logout / Sleep / Reboot / Shutdown
bindsym $mod+Shift+e exec i3-msg exit
#bindsym $mod+Shift+b exec /usr/bin/gnome-session-quit --reboot
#bindsym $mod+Shift+p exec /usr/bin/gnome-session-quit --power-off
bindsym $mod+Escape exec light-locker-command -l
#bindsym $mod+Shift+s exec systemctl suspend

## Settings
# bindsym $mod+c exec gnome-control-center --class=floating_window
# bindsym $mod+d exec gnome-control-center --class=floating_window display
# bindsym $mod+w exec gnome-control-center --class=floating_window wifi
# bindsym $mod+b exec gnome-control-center --class=floating_window bluetooth
# bindsym $mod+s exec gnome-control-center --class=floating_window sound

##################
## Applications ##
##################

set $screenshot grim ~/Pictures/screenshots/scrn-$(date +"%Y-%m-%d-%H-%M-%S").png
set $screenclip slurp | grim -g - ~/Pictures/screenshots/scrn-$(date +"%Y-%m-%d-%H-%M-%S").png
set $lock 'swaylock -f -c 000000'

## Terminal
bindsym $mod+Return exec alacritty

## Browser
bindsym $mod+Shift+Return exec gtk-launch $(xdg-settings get default-web-browser)

## Notification viewer
bindsym $mod+n exec /usr/bin/rofication-gui

## rofi launchers
bindsym $mod+space exec wofi --show=drun --lines=5 --prompt=""
bindsym $mod+shift+space exec rofi -show run
bindsym $mod+ctrl+space exec rofi -show window
bindsym $mod+$alt+space exec rofi -show filebrowser

## File browser
bindsym $mod+Shift+n /usr/bin/thunar --new-window

# Exit sway (logs you out of your Wayland session)
bindsym $mod+Shift+Ctrl+f exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -b 'Yes, exit sway' 'swaymsg exit'

## Media keys
bindsym --locked XF86MonBrightnessUp exec light -S "$(light -G | awk '{ print int(($1 + .72) * 1.4) }')"
bindsym --locked XF86MonBrightnessDown exec light -S "$(light -G | awk '{ print int($1 / 1.4) }')"
bindsym --locked XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5%
bindsym --locked XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5%
bindsym --locked XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym --locked XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle
bindsym --locked XF86AudioPlay exec playerctl play-pause
bindsym --locked XF86AudioNext exec playerctl next
bindsym --locked XF86AudioPrev exec playerctl previous

## Print
bindsym Print exec $screenshot
bindsym Shift+Print exec $screenclip

#############
## Locking ##
#############

bindsym $mod+ctrl+l exec $lock

#exec swayidle -w \
#    	timeout 300 'exec $lock' \
#    	timeout 600 'swaymsg "output * dpms off"' \
#    		resume 'swaymsg "output * dpms on"' \
#    	before-sleep 'exec $lock'

exec swayidle -w \
         timeout 300 'swaylock -f -c 000000' \
         timeout 600 'swaymsg "output * dpms off"' \
              resume 'swaymsg "output * dpms on"' \
         before-sleep 'swaylock -f -c 000000'

#############################
## Appearance and Behavior ##
#############################

input * {
    xkb_layout "us"
    xkb_options "ctrl:nocaps,compose:ralt"
}

# Disable titlebar
default_border pixel 1
default_floating_border pixel 1

# Gaps between windows
gaps inner 5
gaps outer 0
smart_gaps on

# Enable popup during fullscreen
popup_during_fullscreen smart

# window focus follows your mouse movements as the mouse crosses window borders
focus_follows_mouse no

#####################
## Color and Fonts ##
#####################
# class                 border  bground text    indicator child_border
client.focused          #6272A4 #6272A4 #F8F8F2 #6272A4   #6272A4
client.focused_inactive #44475A #44475A #F8F8F2 #44475A   #44475A
client.unfocused        #282A36 #282A36 #BFBFBF #282A36   #282A36
client.urgent           #44475A #FF5555 #F8F8F2 #FF5555   #FF5555
client.placeholder      #282A36 #282A36 #F8F8F2 #282A36   #282A36

client.background       #F8F8F2

# Sets i3 font for dialogs
font pango:Source Code Pro Medium 13

# Personal settings
focus_follows_mouse no
gaps inner 10
default_border pixel 3
exec_always fcitx5 -d --replace

bar {
    font pango:DejaVu Sans Mono
    position bottom
    swaybar_command waybar
    colors {
      background #282A36
      statusline #F8F8F2
      separator  #44475A

      focused_workspace  #44475A #44475A #F8F8F2
      active_workspace   #282A36 #44475A #F8F8F2
      inactive_workspace #282A36 #282A36 #BFBFBF
      urgent_workspace   #FF5555 #FF5555 #F8F8F2
      binding_mode       #FF5555 #FF5555 #F8F8F2
    }
}

include /etc/sway/config.d/*